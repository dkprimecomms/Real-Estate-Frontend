<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Flask on App Runner</title>
<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
<main class="container">
<h1>Flask + AWS App Runner</h1>
<p>This is a minimal front end served by Flask. Try the echo demo below.</p>


<form id="chat-form">
<input id="msg" placeholder="Type a messageâ€¦" autocomplete="off" />
<button type="submit">Send</button>
</form>


<div id="log" class="log"></div>
</main>


<script>
const form = document.getElementById('chat-form');
const input = document.getElementById('msg');
const log = document.getElementById('log');


form.addEventListener('submit', async (e) => {
e.preventDefault();
const text = input.value.trim();
if (!text) return;
append(`You: ${text}`);
input.value = '';
try {
const res = await fetch('/api/echo', {
method: 'POST',
headers: {'Content-Type': 'application/json'},
body: JSON.stringify({message: text})
});
const data = await res.json();
append(`Server: ${data.reply}`);
} catch (err) {
append('Error contacting server');
}
});


function append(line) {
const div = document.createElement('div');
div.textContent = line;
log.appendChild(div);
}
</script>
</body>
</html>
